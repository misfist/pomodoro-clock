$(document).ready(function(){function n(n){return n=parseInt(n,10),60*n}function t(n){var t=Math.floor(n/60).toString()>0?Math.floor(n/60).toString():"",n=n%60;return t+":"+("0"+n).slice(-2)}function e(n){return p.html(n)}function i(){var n=document.getElementById("audio");n.play()}function o(n,t){var e=n-t;return e/n*100}function r(n){$("#timer-inner").css("height",n+"%")}function a(n,t,e){$("input[name='"+n+"']").TouchSpin({buttondown_class:"btn btn-link",buttonup_class:"btn btn-link",min:t,max:e})}function s(){e(t(n(h.prop("value")))),$("#timer-inner").css("height","0%"),d.show(),f.hide(),m.hide(),$("input").prop("disabled",!1),a("work-time",15,60),a("break-time",5,10),$("body").removeClass()}function u(n){p.toggleClass("isPaused"),n.toggleClass("isPaused btn-danger")}function c(){d.hide(),f.show(),m.show(),$("input").prop("disabled",!0)}function l(a,u,c){console.log("startTimer started"),$("body").addClass(u);var l=n(a),d=setInterval(function(){if(m.click(function(n){clearInterval(d),s()}),p.hasClass("isPaused"))console.log("Paused");else{if(0===l)return clearInterval(d),i(),void c();l--,e(t(l)),r(o(n(a),l))}},1e3);return!0}var d=($("#pomodoro-clock"),$("#start-time")),f=$("#pause-time"),m=$("#reset-time"),p=$("#timer"),h=$("#work-time"),v=$("#break-time");s(),d.click(function(){var n=h.prop("value"),t=v.prop("value");c(),l(n,"work-timer",function(){l(t,"break-timer",function(){s()})})}),f.click(function(n){u($(this))}),h.on("change",function(i){e(t(n($(this).prop("value"))))})});